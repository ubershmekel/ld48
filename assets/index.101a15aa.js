import"./vendor.0dd1e043.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const i=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,r)=>{const o=new URL(e,i);if(self[t].moduleMap[o])return s(self[t].moduleMap[o]);const n=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),h=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){r(new Error(`Failed to import: ${e}`)),a(h)},onload(){s(self[t].moduleMap[o]),a(h)}});document.head.appendChild(h)})),self[t].moduleMap={}}}("assets/");var e="./assets/particle-poop-gas.dc46b703.png",t="./assets/test.62dfcf0d.mp3",s="./assets/fly.0506edf4.png",i="./assets/ant-top.4dfd34b0.png";var a={compressionlevel:-1,height:10,infinite:!1,layers:[{data:[93,0,0,0,0,0,0,0,0,93,0,0,0,0,0,0,0,0,0,0,0,0,0,92,0,0,0,0,94,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,93,0,0,0,0,91,0,0,0,0,0,0,0,0,0,0,0,91,0,0,0,0,0,0,0,0,93],height:10,id:1,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:10,x:0,y:0}],nextlayerid:2,nextobjectid:1,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.6.0",tileheight:64,tilesets:[{columns:10,firstgid:1,image:"tilemap.png",imageheight:640,imagewidth:640,margin:0,name:"bob-the-ant",spacing:0,tilecount:100,tileheight:64,tiles:[{id:90,type:"left"},{id:91,type:"right"},{id:92,type:"up"}],tilewidth:64}],tilewidth:64,type:"map",version:"1.6",width:10};class r extends Phaser.Scene{constructor(){super({key:"MenuScene"}),this.sprites=[]}preload(){this.startKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.startKey.isDown=!1,this.load.image("particle",e),this.load.audio("overture",t),this.load.image("tiles","./assets/tilemap.118f3657.png"),this.load.image("fly",s),this.load.image("ant-top",i),this.load.image("splashScreen","./assets/splashScreen.96979245.png"),this.load.tilemapTiledJSON("map",a)}create(){this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"splashScreen");for(let e=0;e<100;e++){const e=Phaser.Math.Between(300,600),t=Phaser.Math.Between(-64,600),s=this.add.image(e,t,"particle");s.setBlendMode(Phaser.BlendModes.NORMAL),this.sprites.push({s:s,r:2+6*Math.random()})}this.input.once("pointerup",(e=>{this.exitMenu()}))}exitMenu(){this.scene.start("DigScene")}update(){this.startKey.isDown&&this.exitMenu();for(let e=0;e<this.sprites.length;e++){const t=this.sprites[e].s;t.y-=this.sprites[e].r,t.y<-256&&(t.y=700)}}}class o extends Phaser.Physics.Arcade.Image{constructor(e,t,s){super(e,t,s,"ant-top"),this.isAlive=!1,this.target=new Phaser.Math.Vector2,this.speed=100,this.setScale(.2),e.add.existing(this),e.physics.add.existing(this);const{LEFT:i,RIGHT:a,UP:r,W:o,A:n,D:h}=Phaser.Input.Keyboard.KeyCodes;this.keys=e.input.keyboard.addKeys({left:i,right:a,up:r,w:o,a:n,d:h})}start(){this.isAlive=!0,this.scene.input.on("pointermove",(e=>{}))}preUpdate(){if(this.isAlive){const e=this.scene.input.activePointer.positionToCamera(this.scene.cameras.main);this.target.x=e.x,this.target.y=e.y,this.rotation=this.scene.physics.moveToObject(this,this.target,this.speed)+Math.PI/2}Phaser.Math.Distance.Between(this.x,this.y,this.target.x,this.target.y)<20&&this.body.reset(this.x,this.y)}}function n(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}const h=[5320725,5583136,5780261,7095062];class l extends Phaser.Scene{constructor(){super({key:"DigScene"}),this.sprites=[]}preload(){this.startKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.startKey.isDown=!1,this.load.image("particle",e),this.load.audio("overture",t),this.load.image("tiles","./assets/tilemap.118f3657.png"),this.load.image("fly",s),this.load.image("poopFalafel","./assets/poopFalafel.a3d83b62.png"),this.load.image("ant-top",i),this.load.tilemapTiledJSON("map",a)}createMap(){const e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("bob-the-ant","tiles");this.groundLayer=e.createLayer("Tile Layer 1",t),this.marker=this.add.graphics(),this.marker.lineStyle(5,16777215,1),this.marker.strokeRect(0,0,e.tileWidth,e.tileHeight),this.marker.lineStyle(3,16732024,1),this.marker.strokeRect(0,0,e.tileWidth,e.tileHeight)}generatePoopMap(){let e=10,t=0,s=0;for(;e>0;){for(let r=0;r<e;r++){const e=0+100*r+12.5*Math.random()+100*s,o=0-100*t+12.5*Math.random(),n=this.add.image(e,o,"poopFalafel");n.tint=h[Math.floor(Math.random()*h.length)],n.scale=(i=.9,a=1.1,Math.random()*(a-i)+i)}e-=1,Math.random()>.5&&(e-=1),t+=1,e>1&&(s+=n(-1,1))}var i,a}create(){console.log("world",this.physics.world.bounds),this.add.text(0,0,"Press S to restart",{fontSize:"60px",fontFamily:"Helvetica"}),this.add.image(100,100,"particle"),this.generatePoopMap(),this.input.once("pointerup",(e=>{this.player.start()})),this.player=new o(this,0,0)}update(){this.cameras.main.startFollow(this.player),this.startKey.isDown&&this.scene.start(this);for(let e=0;e<this.sprites.length;e++){const t=this.sprites[e].s;t.y-=this.sprites[e].r,t.y<-256&&(t.y=700)}if(this.marker){const e=this.input.activePointer.positionToCamera(this.cameras.main),t=this.groundLayer.worldToTileXY(e.x,e.y),s=this.groundLayer.tileToWorldXY(t.x,t.y);this.marker.setPosition(s.x,s.y)}}}const d={title:"Where is Bob",url:"https://yuvalg.com",version:"2.0",width:800,height:600,type:Phaser.AUTO,parent:"app",scene:[l,r],input:{keyboard:!0},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},backgroundColor:"#000000",render:{pixelArt:!1,antialias:!0},audio:{disableWebAudio:!1},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH}};class p extends Phaser.Game{constructor(e){super(e)}}window.addEventListener("load",(()=>{const e=new p(d);console.log(e)}));
